<div class="container mx-auto p-6 bg-white rounded-lg shadow-lg w-full">
  <form [formGroup]="educationForm" (ngSubmit)="onSubmit()" class="space-y-4">
    <!-- Degree -->
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
      <div>
        <label for="degree" class="block text-sm font-medium text-teal-700"
          >Degree *</label
        >
        <input
          type="text"
          id="degree"
          placeholder="Enter your degree"
          class="form-input"
          formControlName="degree"
        />
        @if (f['degree'].touched && f['degree'].invalid) {
        <div class="text-red-500 text-sm">
          @if (f['degree'].errors?.['required']) {
          <div >Degree is required.</div>
          } @if (f['degree'].errors?.['minlength']) {
          <div>Degree must be at least 3 characters long.</div>
          }
        </div>
        }
      </div>
      <div>
        <label
          for="fieldOfStudy"
          class="block text-sm font-medium text-teal-700"
          >Field of Study *</label
        >
        <input
          type="text"
          id="fieldOfStudy"
          placeholder="e.g., Computer Science"
          class="form-input"
          formControlName="fieldOfStudy"
        />
        @if (f['fieldOfStudy'].touched && f['fieldOfStudy'].invalid) {
        <div class="text-red-500 text-sm">
          @if (f['fieldOfStudy'].errors?.['required']) {
          <div>Field of Study is required.</div>
          } @if (f['fieldOfStudy'].errors?.['minlength']) {
          <div>Field of Study must be at least 3 characters long.</div>
          }
        </div>
        }
      </div>
    </div>

    <div class="flex flex-col md:flex-row items-center space-x-2">
      <!-- Institution Logo Section -->
      <div class="flex-shrink-0">
        <img
          class="h-16 w-14 object-cover rounded-sm border-1 border-teal-700"
          [src]="logoUrl ? logoUrl : 'https://via.placeholder.com/100'"
          alt="Institution Logo"
        />
      </div>
    
      <!-- Institution Input Section -->
      <div class="flex-1">
        <label for="institution" class="block text-sm font-medium text-teal-700">Institution *</label>
        <input
          type="text"
          id="institution"
          placeholder="Enter your institution"
          class="form-input w-full border border-gray-300 rounded-md p-2 "
          formControlName="institution"
           (focus)="showSuggestions = true"
          (blur)="onBlur()"
        />
    
        @if (f['institution'].touched && f['institution'].invalid) {
          <div class="text-red-500 text-sm">
            @if (f['institution'].errors?.['required']) {
            <div>Institution is required.</div>
            } @if (f['institution'].errors?.['minlength']) {
            <div>Institution must be at least 3 characters long.</div>
            }
          </div>
          }
          @if(showSuggestions && instituteSuggestions.length){
            <ul  class="absolute w-4/5 bg-white border mt-1 shadow-lg rounded-md z-10">
              @for(suggestion of instituteSuggestions;track suggestion){
                <li
                (click)="selectCompany(suggestion)"
                class="cursor-pointer px-4 py-2 hover:bg-gray-200"
              >
                <!-- Display Company Name and Logo -->
                <div class="flex items-center">
                  <img [src]="suggestion.logo_url" alt="suggestion.name" class="h-6 w-6 rounded-full mr-2" />
                  {{ suggestion.name }}
                </div>
              </li>
              }
            
            </ul>
           }
      </div>
    </div>
    
  

    

    <!-- Start and End Date -->
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
      <div>
        <label for="startDate" class="block text-sm font-medium text-teal-700"
          >Start Date *</label
        >
        <input
          type="date"
          id="startDate"
          class="form-input"
          formControlName="startDate"
        />
        @if (f['startDate'].touched && f['startDate'].invalid) {
        <div class="text-red-500 text-sm">
          @if (f['startDate'].errors?.['required']) {
          <div>Start Date is required.</div>
          }
        </div>
        }
      </div>
      <div>
        <label for="endDate" class="block text-sm font-medium text-teal-700"
          >End Date</label
        >
        <input
          type="date"
          id="endDate"
          class="form-input"
          formControlName="endDate"
        />
      </div>
    </div>

    <!-- Grade -->
    <div>
      <label for="grade" class="block text-sm font-medium text-teal-700"
        >Grade</label
      >
      <input
        type="text"
        id="grade"
        placeholder="e.g., A+, 4.0 GPA"
        class="form-input"
        formControlName="grade"
      />
      @if (f['grade'].touched && f['grade'].invalid) {
      <div class="text-red-500 text-sm">
        @if (f['grade'].errors?.['pattern']) {
        <div>Invalid grade format.</div>
        }
      </div>
      }
    </div>

    <!-- Activities -->
    <div>
      <label for="activities" class="block text-sm font-medium text-teal-700"
        >Activities</label
      >
      <textarea
        id="activities"
        placeholder="e.g., Member of Coding Club, Sports Team"
        class="form-textarea"
        formControlName="activities"
      ></textarea>
      @if (f['activities'].touched && f['activities'].invalid) {
      <div class="text-red-500 text-sm">
        @if (f['activities'].errors?.['maxlength']) {
        <div>Activities must be less than 300 characters.</div>
        }
      </div>
      }
    </div>

    <!-- Skills -->
    <div>
      <label for="skills" class="block text-sm font-medium text-teal-700"
        >Skills</label
      >
      <input
        type="text"
        id="skills"
        placeholder="e.g., JavaScript, Python"
        class="form-input"
        #skillInput
        (keyup.enter)="addSkill(skillInput.value); skillInput.value = ''"
      />
      <div class="flex flex-wrap gap-2 mt-3">
        @for (skill of skills.controls; track skill; let i =$index) {
          <app-tags [index]="i" (removeTag)="removeSkill($event)">{{ skill.value }}</app-tags>
        }
      </div>
      @if (f['skills'].touched && f['skills'].invalid) {
      <div class="text-red-500 text-sm">
        @if (f['skills'].errors?.['maxlength']) {
        <div>Skills must be less than 200 characters.</div>
        }
      </div>
      }
    </div>

    <!-- Submit Button -->
    <div class="text-right space-x-4">
      <!-- Save Button -->
      <button
      type="button"
      (click)="educationForm.reset()"
      class="btn-secondary"
    >
      Discard
    </button>
      <button
        type="submit"
        [disabled]="educationForm.invalid"
        class="btn-primary"
      >
        Save
      </button>

      <!-- Discard Button -->
     
    </div>
  </form>
</div>
