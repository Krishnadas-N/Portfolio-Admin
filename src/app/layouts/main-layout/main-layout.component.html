<div
    class="h-screen w-full bg-background text-text-primary font-sans antialiased overflow-hidden flex selection:bg-primary/30">

    <!-- Mobile Drawer Overlay -->
    <div class="fixed inset-0 z-40 bg-black/40 backdrop-blur-sm lg:hidden transition-opacity duration-300 opacity-0 pointer-events-none peer-checked:opacity-100 peer-checked:pointer-events-auto"
        onclick="document.getElementById('drawer-toggle').checked = false"></div>

    <!-- Mobile Sidebar (Off-canvas) -->
    <!-- Note: We use the same sidebar component. Logic needs to handle the toggle state. 
         Input hack for pure CSS toggle. 
    -->
    <input type="checkbox" id="drawer-toggle" class="drawer-toggle hidden peer" />
    <aside
        class="fixed inset-y-0 left-0 z-50 w-72 h-full bg-surface-glass border-r border-border backdrop-blur-2xl transition-transform duration-300 transform -translate-x-full peer-checked:translate-x-0 lg:hidden shadow-2xl">
        <div class="h-full flex flex-col relative">
            <button onclick="document.getElementById('drawer-toggle').checked = false"
                class="absolute top-4 right-4 btn btn-sm btn-circle btn-ghost text-text-secondary z-50 hover:bg-surface-elevated/50">
                <i class="fa-solid fa-xmark text-lg"></i>
            </button>
            <app-sidebar class="h-full w-full block"></app-sidebar>
        </div>
    </aside>

    <!-- Desktop Sidebar -->
    <aside
        class="hidden lg:block h-full z-40 bg-surface-glass border-r border-border/50 backdrop-blur-xl shrink-0 transition-all duration-300 ease-in-out relative">
        <app-sidebar class="h-full w-full block"></app-sidebar>
    </aside>

    <!-- Main Content Wrapper -->
    <div class="flex-1 flex flex-col h-full min-w-0 relative overflow-hidden bg-background/50">

        <!-- Header -->
        <header
            class="flex-none h-16 z-30 flex items-center justify-between px-6 glass-header sticky top-0 bg-surface-glass/90 backdrop-blur-xl border-b border-border/50 w-full">
            <app-header class="w-full"></app-header>
        </header>

        <!-- Scrollable Main Content -->
        <main class="flex-1 overflow-y-auto overflow-x-hidden p-6 scroll-smooth custom-scrollbar relative">

            <!-- Breadcrumb / Context Bar (Optional placeholder for spacing if needed) -->
            <!-- <div class="mb-6 h-6"></div> -->

            <!-- Content Container -->
            <div class="max-w-[1920px] mx-auto w-full animate-fade-in-up pb-10">
                <router-outlet></router-outlet>
            </div>

        </main>
    </div>
</div>

<!-- Fix for peer-checked selector: The input must be a sibling preceding the affected elements. 
     I'll wrap everything in a way that the input is at the top level.
-->
<script>
    // Simple script to handle mobile sidebar closing on route change if needed, 
    // effectively handled by Angular router events usually.
</script>
<app-toast></app-toast>